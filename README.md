# social_network_system_design
## System Design социальной сети для курса по System Design

### Функциональные требования

1) CRUD постов 
2) Система лайков постов
3) Система комментариев
4) Подписки на других путешественников
5) Поиск популярных мест и постов связанных с этими местами
6) Лента просмотра постов по подпискам

### Нефункциональные требования:

1) DAU = 10 000 000
2) Доступность - 99.95%
3) Аудитория - СНГ
4) Сезонность (сезоны отпусков) - множитель х3
5) Активность пользователей:
   - Пользователь выкладывает 1 пост в неделю
   - Пользователь оставляет 7 комментариев в неделю
   - Пользователь оценивает 5 постов в день
   - Пользователь подписывается на 3 человек в неделю
   - Пользователь просматривает ленту 20 раз в день
   - Пользователь пользуется поиском мест 3 раза в неделю
   - Пользователь окрывает 5 комментариев под постом в день
     
### Лимиты
1) Ограничение по кол-ву подписок у пользователя - 10 000
2) Ограничение комментария - 150 символов
3) Ограничения изображений на пост - 5 изображений (10Mb)
4) Ограничение описания - 300 символов
5) Ограничение постов - не более 15 в день

### Хранение данных
Данные храним всегда.

### Временные ограничения
1) Создание поста - 2с
2) Редактирование/удаление - 1с
3) Система лайков - 0.5с
4) Создание комментария - 1с
5) Подписка - 0.5с
6) Поиск популярных мест - 2с
7) Лента пользователя - 1с

### Расчёт нагрузки

`DAU = 10 000 000`

Система постов
```
RPS(write) = 10 000 000 / 86400 / 7 ~=16
RPS(read) = 10 000 000 * 20 / 86400 ~= 2314
```

Система лайков
```
RPS(write) = 10 000 000 * 5 / 86400 ~= 578
```

Система комментариев
```
RPS(write) = 10 000 000 * 7 / 86400 / 7 ~= 115
RPS(read) = 10 000 000 * 5 / 86400 ~= 578
```

Система поиска
```
RPS(read) = 10 000 000 * 3 / 86400 / 7 ~= 49
```

### Расчёт трафика

#### Система постов
Модель данных (896B)
```
user_id - 8B
post_id - 8B
created_at - 8B
description - 600B
location - 16B
image_url - 256B 
```

1) Медиа:
  - `create = 16 * 10MB ~= 160 MB/s`
  - `read = 2314 * 10MB ~= 20GB/s`
2) Метаинформация
  - `create = 16 * 896B ~= 14 KB/s`
  - `read = 2314 * 896B ~= 2 MB/s`

Модель данных для комментария

#### Система комментариев
Модель данных (324B)
```
user_id - 8B
comment_id - 8B
created_at - 8B
comment_text - 300B
```
`create = 115 * 324B ~= 37 KB/s`
`read = 578 * 324 ~= 287 KB/s`

#### Система поиска
Модель данных (1288B)
```
location_name - 8B
image - 256B
description - 1024B
```
`read = 49 * 1288B = 63KB/s`
